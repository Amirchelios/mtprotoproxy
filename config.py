# =================================================================
#  MTProto Proxy - High Performance & Stability Configuration
# =================================================================

# پورت 443 به عنوان پورت استاندارد HTTPS، معمولا بهترین عملکرد و کمترین حساسیت را دارد
PORT = 443

# 🚨 این بخش را حتما با کاربران و سکرت‌های امن خودتان جایگزین کنید
# برای ساخت سکرت امن جدید می‌توانید از دستور زیر در ترمینال لینوکس استفاده کنید:
# hexdump -vn "16" -e ' /1 "%02x"' /dev/urandom
USERS = {
    "user_fast_01": "e4a9c1b2d6e0f7a5d3c8b9a1e2f7c4f8",
}

# -----------------------------------------------------------------
# بخش تنظیمات امنیتی و ضد فیلترینگ
# -----------------------------------------------------------------

# استفاده از یک دامنه معتبر اما کمتر شناخته شده برای حالت TLS
# این کار به شناسایی نشدن پراکسی کمک می‌کند. می‌توانید به دلخواه تغییر دهید.
TLS_DOMAIN = "www.kernel.org"

# فقط حالت TLS فعال است که امن‌ترین، پایدارترین و مقاوم‌ترین حالت در برابر فیلترینگ است
MODES = {
    "classic": False,
    "secure": False,
    "tls": True,
}

# فعال کردن حالت نقاب: درخواست‌های نامعتبر به دامنه بالا هدایت می‌شوند تا سیستم‌های
# فیلترینگ را گمراه کنند و این به پایداری پراکسی کمک می‌کند.
MASK = True
MASK_HOST = TLS_DOMAIN  # هدایت به همان دامنه TLS
MASK_PORT = 443

# -----------------------------------------------------------------
# بخش بهینه‌سازی عملکرد و شبکه
# -----------------------------------------------------------------

# فعال کردن حالت سریع: این گزینه با غیرفعال کردن رمزگذاری مجدد و غیرضروری،
# بار پردازنده سرور را به شدت کاهش داده و سرعت را افزایش می‌دهد.
FAST_MODE = True

# تنظیم اندازه بافرها برای شبکه‌های با کیفیت بالا. بافرهای بزرگتر به معنی
# انتقال دیتا در بسته‌های بزرگتر و در نتیجه، سرعت بالاتر است.
# این تنظیمات به صورت داینامیک عمل می‌کنند: تا ۱۰۰ کاربر بافر بزرگ، بیشتر از آن بافر کوچک.
TO_CLT_BUFSIZE = (32768, 100, 131072)  # (کوچک، تعداد کاربر، بزرگ)
TO_TG_BUFSIZE = (16384, 100, 65536)

# تنظیم زمان ارسال بسته‌های Keep-Alive روی ۴ دقیقه (۲۴۰ ثانیه).
# این کار از قطع شدن اتصال شما توسط فایروال‌های میانی در زمان بیکاری جلوگیری می‌کند
# و به پایداری اتصال کمک می‌کند.
CLIENT_KEEPALIVE = 240

# کاهش زمان انتظار برای Handshake اولیه. در شبکه‌های سریع، اتصال باید
# به سرعت برقرار شود. این کار از معطل ماندن منابع سرور برای کاربران کند جلوگیری می‌کند.
CLIENT_HANDSHAKE_TIMEOUT = 10

# -----------------------------------------------------------------
# بخش مدیریت پیشرفته (در صورت نیاز می‌توانید از کامنت خارج کنید)
# -----------------------------------------------------------------

# # فعال کردن پراکسی SOCKS5 برای عبور ترافیک از WARP (در صورت نصب بودن)
# SOCKS5_HOST = "127.0.0.1"
# SOCKS5_PORT = 40000

# # فعال کردن خروجی برای مانیتورینگ با Prometheus
# METRICS_PORT = 9100
